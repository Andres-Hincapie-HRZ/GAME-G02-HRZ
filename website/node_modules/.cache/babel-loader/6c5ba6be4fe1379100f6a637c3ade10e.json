{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/abrah/toxic/projects/supergo2/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/abrah/toxic/projects/supergo2/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{logout}from\"../actions/auth\";import store from'../store';export var Api=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(method,route,data){var user,promise,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=JSON.parse(localStorage.getItem(\"user\"));promise=axios({method:method,url:\"\".concat(process.env.REACT_APP_API,\"/\").concat(route),headers:{Authorization:\"\".concat(user.data.token),\"content-type\":\"application/json\"},data:data});_context.next=4;return promise.then(function(resp){var status=resp.status,data=resp.data;if(status===401||data.code===401)store.dispatch(logout());return resp;}).catch(function(err){return err.response;});case 4:response=_context.sent;return _context.abrupt(\"return\",response);case 6:case\"end\":return _context.stop();}}},_callee);}));return function Api(_x,_x2,_x3){return _ref.apply(this,arguments);};}();","map":{"version":3,"names":["axios","logout","store","Api","method","route","data","user","JSON","parse","localStorage","getItem","promise","url","process","env","REACT_APP_API","headers","Authorization","token","then","resp","status","code","dispatch","catch","err","response"],"sources":["C:/Users/abrah/toxic/projects/supergo2/website/src/components/Api.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { logout } from \"../actions/auth\";\r\nimport store from '../store';\r\n\r\nexport const Api = async (method, route, data) => {\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const promise = axios({\r\n    method: method,\r\n    url: `${process.env.REACT_APP_API}/${route}`,\r\n    headers: {\r\n      Authorization: `${user.data.token}`,\r\n      \"content-type\": \"application/json\",\r\n    },\r\n    data,\r\n  });\r\n  const response = await promise\r\n    .then((resp) => {\r\n      const { status, data } = resp;\r\n\r\n      if (status === 401 || data.code === 401)\r\n        store.dispatch(logout());\r\n\r\n      return resp;\r\n    })\r\n    .catch((err) => {\r\n      return err.response;\r\n    });\r\n\r\n  return response;\r\n};"],"mappings":"uUAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,KAAuB,iBAAvB,CACA,MAAOC,MAAP,KAAkB,UAAlB,CAEA,MAAO,IAAMC,IAAG,0FAAG,iBAAOC,MAAP,CAAeC,KAAf,CAAsBC,IAAtB,4IACXC,IADW,CACJC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CADI,CAEXC,OAFW,CAEDZ,KAAK,CAAC,CACpBI,MAAM,CAAEA,MADY,CAEpBS,GAAG,WAAKC,OAAO,CAACC,GAAR,CAAYC,aAAjB,aAAkCX,KAAlC,CAFiB,CAGpBY,OAAO,CAAE,CACPC,aAAa,WAAKX,IAAI,CAACD,IAAL,CAAUa,KAAf,CADN,CAEP,eAAgB,kBAFT,CAHW,CAOpBb,IAAI,CAAJA,IAPoB,CAAD,CAFJ,uBAWMM,QAAO,CAC3BQ,IADoB,CACf,SAACC,IAAD,CAAU,CACd,GAAQC,OAAR,CAAyBD,IAAzB,CAAQC,MAAR,CAAgBhB,IAAhB,CAAyBe,IAAzB,CAAgBf,IAAhB,CAEA,GAAIgB,MAAM,GAAK,GAAX,EAAkBhB,IAAI,CAACiB,IAAL,GAAc,GAApC,CACErB,KAAK,CAACsB,QAAN,CAAevB,MAAM,EAArB,EAEF,MAAOoB,KAAP,CACD,CARoB,EASpBI,KAToB,CASd,SAACC,GAAD,CAAS,CACd,MAAOA,IAAG,CAACC,QAAX,CACD,CAXoB,CAXN,QAWXA,QAXW,+CAwBVA,QAxBU,wDAAH,kBAAHxB,IAAG,oDAAT"},"metadata":{},"sourceType":"module"}